---
interface Props {
  render: Render;
  requires?: AstroComponentFactory[];
}
import type { AstroComponentFactory } from "astro/dist/runtime/server";
import type { Render, FM_D } from "@lib/api";
const { render } = Astro.props;
const active = render.active;
const ssgData = render.data as FM_D[];
---

<style>
  .this {
    background-attachment: fixed;
  }
  .this:focus {
    outline: 4px dashed green;
  }

  /* Ensure some breathing before tabbing in #main */
  /* TODO final polish */
  :target {
    scroll-margin-top: calc((var(--top-placement) + var(--rocket-overlap)));
  }
</style>

<main
  id="main"
  tabindex="0"
  class="this | tile-light dark:tile-dark || bg-orange"
>
  <template x-for="(x, idx) in f(search)">
    <li tabindex="0" class="border h-40">
      <span x-html="hl(search, x.title)"></span>
      <span x-html="hl(search, x.summary)"></span>
      <span x-html="hl(search, x.category)"></span>
      <span x-text="x.date"></span>
      <span x-text="x.tags"></span>
      <span x-text="x.id"></span>
    </li>
  </template>
  {
    ssgData.map((item) => (
      <li x-show="0" tabindex="0" class="border h-40">
        <span>{item.title}</span>
        <span>{item.summary}</span>
        <span>{item.category}</span>
        <span>{item.date}</span>
        <span>{item.tags}</span>
        <span>{item.id}</span>
      </li>
    ))
  }
</main>
